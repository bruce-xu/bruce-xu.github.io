---
layout: demo
title: 图片瀑布流 DEMO
permalink: /demos/waterfall/
categories: [demo]
---

<div class="container" id="container"></div>
<style type="text/css">
    .wrapper {
        max-width: initial;
    }
    .post-header,
    .site-footer {
        display: none;
    }
    .container {
        width: 1000px;
        margin: 0 auto;
    }
    .wf-img {
        float: left;
        width: 200px;
        padding: 5px;
        margin: 3px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }
    .wf-img img {
        width: 100%;
    }
</style>
<script src="Waterfall.js"></script>
<script>
    var pagedImages = [
      [
        "/assets/waterfall/imgs/1.jpg",
        "/assets/waterfall/imgs/2.jpg",
        "/assets/waterfall/imgs/3.jpg",
        "/assets/waterfall/imgs/4.jpg",
        "/assets/waterfall/imgs/5.jpg",
        "/assets/waterfall/imgs/6.jpg",
        "/assets/waterfall/imgs/7.jpg",
        "/assets/waterfall/imgs/8.jpg",
        "/assets/waterfall/imgs/9.jpg",
        "/assets/waterfall/imgs/10.jpg",
        "/assets/waterfall/imgs/11.jpg",
        "/assets/waterfall/imgs/12.jpg",
        "/assets/waterfall/imgs/13.jpg",
        "/assets/waterfall/imgs/14.jpg",
        "/assets/waterfall/imgs/15.jpg",
        "/assets/waterfall/imgs/16.jpg",
        "/assets/waterfall/imgs/17.jpg",
        "/assets/waterfall/imgs/18.jpg",
        "/assets/waterfall/imgs/19.jpg",
        "/assets/waterfall/imgs/20.jpg",
        "/assets/waterfall/imgs/21.jpg",
        "/assets/waterfall/imgs/22.jpg",
        "/assets/waterfall/imgs/23.jpg",
        "/assets/waterfall/imgs/24.jpg",
        "/assets/waterfall/imgs/25.jpg",
        "/assets/waterfall/imgs/26.jpg",
        "/assets/waterfall/imgs/27.jpg",
        "/assets/waterfall/imgs/28.jpg",
        "/assets/waterfall/imgs/29.jpg",
        "/assets/waterfall/imgs/30.jpg",
        "/assets/waterfall/imgs/31.jpg",
        "/assets/waterfall/imgs/32.jpg",
        "/assets/waterfall/imgs/33.jpg",
        "/assets/waterfall/imgs/34.jpg",
        "/assets/waterfall/imgs/35.jpg",
        "/assets/waterfall/imgs/36.jpg",
        "/assets/waterfall/imgs/37.jpg",
        "/assets/waterfall/imgs/38.jpg",
        "/assets/waterfall/imgs/39.jpg",
        "/assets/waterfall/imgs/40.jpg",
        "/assets/waterfall/imgs/41.jpg",
        "/assets/waterfall/imgs/42.jpg",
        "/assets/waterfall/imgs/43.jpg",
        "/assets/waterfall/imgs/44.jpg",
        "/assets/waterfall/imgs/45.jpg",
        "/assets/waterfall/imgs/46.jpg",
        "/assets/waterfall/imgs/47.jpg",
        "/assets/waterfall/imgs/48.jpg",
        "/assets/waterfall/imgs/49.jpg",
        "/assets/waterfall/imgs/50.jpg"
      ],
      [
        "/assets/waterfall/imgs/51.jpg",
        "/assets/waterfall/imgs/52.jpg",
        "/assets/waterfall/imgs/53.jpg",
        "/assets/waterfall/imgs/54.jpg",
        "/assets/waterfall/imgs/55.jpg",
        "/assets/waterfall/imgs/56.jpg",
        "/assets/waterfall/imgs/57.jpg",
        "/assets/waterfall/imgs/58.jpg",
        "/assets/waterfall/imgs/59.jpg",
        "/assets/waterfall/imgs/60.jpg",
        "/assets/waterfall/imgs/61.jpg",
        "/assets/waterfall/imgs/62.jpg",
        "/assets/waterfall/imgs/63.jpg",
        "/assets/waterfall/imgs/64.jpg",
        "/assets/waterfall/imgs/65.jpg",
        "/assets/waterfall/imgs/66.jpg",
        "/assets/waterfall/imgs/67.jpg",
        "/assets/waterfall/imgs/68.jpg",
        "/assets/waterfall/imgs/69.jpg",
        "/assets/waterfall/imgs/70.jpg",
        "/assets/waterfall/imgs/71.jpg",
        "/assets/waterfall/imgs/72.jpg",
        "/assets/waterfall/imgs/73.jpg",
        "/assets/waterfall/imgs/74.jpg",
        "/assets/waterfall/imgs/75.jpg",
        "/assets/waterfall/imgs/76.jpg",
        "/assets/waterfall/imgs/77.jpg",
        "/assets/waterfall/imgs/78.jpg",
        "/assets/waterfall/imgs/79.jpg",
        "/assets/waterfall/imgs/80.jpg",
        "/assets/waterfall/imgs/81.jpg",
        "/assets/waterfall/imgs/82.jpg",
        "/assets/waterfall/imgs/83.jpg",
        "/assets/waterfall/imgs/84.jpg",
        "/assets/waterfall/imgs/85.jpg",
        "/assets/waterfall/imgs/86.jpg",
        "/assets/waterfall/imgs/87.jpg",
        "/assets/waterfall/imgs/88.jpg",
        "/assets/waterfall/imgs/89.jpg",
        "/assets/waterfall/imgs/90.jpg",
        "/assets/waterfall/imgs/91.jpg",
        "/assets/waterfall/imgs/92.jpg",
        "/assets/waterfall/imgs/93.jpg",
        "/assets/waterfall/imgs/94.jpg",
        "/assets/waterfall/imgs/95.jpg",
        "/assets/waterfall/imgs/96.jpg",
        "/assets/waterfall/imgs/97.jpg",
        "/assets/waterfall/imgs/98.jpg",
        "/assets/waterfall/imgs/99.jpg",
        "/assets/waterfall/imgs/100.jpg"
      ],
      [
        "/assets/waterfall/imgs/101.jpg",
        "/assets/waterfall/imgs/102.jpg",
        "/assets/waterfall/imgs/103.jpg",
        "/assets/waterfall/imgs/104.jpg",
        "/assets/waterfall/imgs/105.jpg",
        "/assets/waterfall/imgs/106.jpg",
        "/assets/waterfall/imgs/107.jpg",
        "/assets/waterfall/imgs/108.jpg",
        "/assets/waterfall/imgs/109.jpg",
        "/assets/waterfall/imgs/110.jpg",
        "/assets/waterfall/imgs/111.jpg",
        "/assets/waterfall/imgs/112.jpg",
        "/assets/waterfall/imgs/113.jpg",
        "/assets/waterfall/imgs/114.jpg",
        "/assets/waterfall/imgs/115.jpg",
        "/assets/waterfall/imgs/116.jpg",
        "/assets/waterfall/imgs/117.jpg",
        "/assets/waterfall/imgs/118.jpg",
        "/assets/waterfall/imgs/119.jpg",
        "/assets/waterfall/imgs/120.jpg",
        "/assets/waterfall/imgs/121.jpg",
        "/assets/waterfall/imgs/122.jpg",
        "/assets/waterfall/imgs/123.jpg",
        "/assets/waterfall/imgs/124.jpg",
        "/assets/waterfall/imgs/125.jpg",
        "/assets/waterfall/imgs/126.jpg",
        "/assets/waterfall/imgs/127.jpg",
        "/assets/waterfall/imgs/128.jpg",
        "/assets/waterfall/imgs/129.jpg",
        "/assets/waterfall/imgs/130.jpg",
        "/assets/waterfall/imgs/131.jpg",
        "/assets/waterfall/imgs/132.jpg",
        "/assets/waterfall/imgs/133.jpg",
        "/assets/waterfall/imgs/134.jpg",
        "/assets/waterfall/imgs/135.jpg",
        "/assets/waterfall/imgs/136.jpg",
        "/assets/waterfall/imgs/137.jpg",
        "/assets/waterfall/imgs/138.jpg",
        "/assets/waterfall/imgs/139.jpg",
        "/assets/waterfall/imgs/140.jpg",
        "/assets/waterfall/imgs/141.jpg",
        "/assets/waterfall/imgs/142.jpg",
        "/assets/waterfall/imgs/143.jpg",
        "/assets/waterfall/imgs/144.jpg",
        "/assets/waterfall/imgs/145.jpg",
        "/assets/waterfall/imgs/146.jpg",
        "/assets/waterfall/imgs/147.jpg",
        "/assets/waterfall/imgs/148.jpg",
        "/assets/waterfall/imgs/149.jpg",
        "/assets/waterfall/imgs/150.jpg"
      ],
      [
        "/assets/waterfall/imgs/151.jpg",
        "/assets/waterfall/imgs/152.jpg",
        "/assets/waterfall/imgs/153.jpg",
        "/assets/waterfall/imgs/154.jpg",
        "/assets/waterfall/imgs/155.jpg",
        "/assets/waterfall/imgs/156.jpg",
        "/assets/waterfall/imgs/157.jpg",
        "/assets/waterfall/imgs/158.jpg",
        "/assets/waterfall/imgs/159.jpg",
        "/assets/waterfall/imgs/160.jpg",
        "/assets/waterfall/imgs/161.jpg",
        "/assets/waterfall/imgs/162.jpg",
        "/assets/waterfall/imgs/163.jpg",
        "/assets/waterfall/imgs/164.jpg",
        "/assets/waterfall/imgs/165.jpg",
        "/assets/waterfall/imgs/166.jpg",
        "/assets/waterfall/imgs/167.jpg",
        "/assets/waterfall/imgs/168.jpg",
        "/assets/waterfall/imgs/169.jpg",
        "/assets/waterfall/imgs/170.jpg",
        "/assets/waterfall/imgs/171.jpg",
        "/assets/waterfall/imgs/172.jpg",
        "/assets/waterfall/imgs/173.jpg",
        "/assets/waterfall/imgs/174.jpg",
        "/assets/waterfall/imgs/175.jpg",
        "/assets/waterfall/imgs/176.jpg",
        "/assets/waterfall/imgs/177.jpg",
        "/assets/waterfall/imgs/178.jpg",
        "/assets/waterfall/imgs/179.jpg",
        "/assets/waterfall/imgs/180.jpg",
        "/assets/waterfall/imgs/181.jpg",
        "/assets/waterfall/imgs/182.jpg",
        "/assets/waterfall/imgs/183.jpg",
        "/assets/waterfall/imgs/184.jpg",
        "/assets/waterfall/imgs/185.jpg",
        "/assets/waterfall/imgs/186.jpg",
        "/assets/waterfall/imgs/187.jpg",
        "/assets/waterfall/imgs/188.jpg",
        "/assets/waterfall/imgs/189.jpg",
        "/assets/waterfall/imgs/190.jpg",
        "/assets/waterfall/imgs/191.jpg",
        "/assets/waterfall/imgs/192.jpg",
        "/assets/waterfall/imgs/193.jpg",
        "/assets/waterfall/imgs/194.jpg",
        "/assets/waterfall/imgs/195.jpg",
        "/assets/waterfall/imgs/196.jpg",
        "/assets/waterfall/imgs/197.jpg",
        "/assets/waterfall/imgs/198.jpg",
        "/assets/waterfall/imgs/199.jpg",
        "/assets/waterfall/imgs/200.jpg"
      ]
    ];

    var page = 0;
    var SCROLL_THRESHOLD = 20;
    var container = document.getElementById('container');

    function update(page) {
        var images = pagedImages[page];
        var html = [];
        var div = null;
        var img = null;
        var fragment = document.createDocumentFragment();
        for (var i = 0, len = images.length; i < len; i++) {
            div = document.createElement('div');
            div.className = 'wf-img';
            img = document.createElement('img');
            img.src = images[i];
            div.appendChild(img);
            fragment.appendChild(div);
        }
        container.appendChild(fragment);
    }

    update(page);

    var waterfall = new Waterfall({
        container: container
    });

    window.onscroll = function () {
        var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        var scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;
        if (!scrollTop || scrollTop + window.innerHeight + SCROLL_THRESHOLD < scrollHeight) {
            return;
        }

        if (page + 1 < pagedImages.length) {
            update(++page);
            waterfall.render();
        }
    };
</script>
